import{S as se,i as ae,s as ne,Q as Y,R as Z,w as G,a as S,k as V,q as w,x as R,c as k,l as N,m as T,r as E,h as c,n as F,y as X,b as A,E as p,L as le,T as re,U as x,f as M,t as z,d as oe,z as C,o as ue,u as j,g as ie}from"../../../../chunks/index-248baa26.js";import{T as fe}from"../../../../chunks/Title-7566ad5c.js";import{I as ee}from"../../../../chunks/Input-868e269e.js";import{B as me}from"../../../../chunks/Button-af951ed6.js";import{g as pe,a as _e,r as de,s as ce}from"../../../../chunks/functions-0020b864.js";import{l as J}from"../../../../chunks/lodash-b1c1932f.js";import{g as K}from"../../../../chunks/navigation-9477c7e0.js";function ge(i){let s;return{c(){s=w("Add Player")},l(a){s=E(a,"Add Player")},m(a,t){A(a,s,t)},d(a){a&&c(s)}}}function W(i){let s,a,t,l,v,$,r,f,P,h=(i[1]||0)+"",_,m,d,B,q=(i[3]||0)+"",D,o,e,u,b=(i[2]||0)+"",L,y;function te(n){i[7](n)}let H={type:"number",id:"new-player-score",required:!0};return i[4].rounds[i[4].rounds.length-1]!==void 0&&(H.value=i[4].rounds[i[4].rounds.length-1]),l=new ee({props:H}),Y.push(()=>Z(l,"value",te)),{c(){s=V("label"),a=w("Starting Score"),t=S(),G(l.$$.fragment),$=S(),r=V("div"),f=V("div"),P=w("MIN \u2014 "),_=w(h),m=S(),d=V("div"),B=w("AVG \u2014 "),D=w(q),o=S(),e=V("div"),u=w("MAX \u2014 "),L=w(b),this.h()},l(n){s=N(n,"LABEL",{for:!0,class:!0});var g=T(s);a=E(g,"Starting Score"),g.forEach(c),t=k(n),R(l.$$.fragment,n),$=k(n),r=N(n,"DIV",{class:!0});var I=T(r);f=N(I,"DIV",{});var O=T(f);P=E(O,"MIN \u2014 "),_=E(O,h),O.forEach(c),m=k(I),d=N(I,"DIV",{});var Q=T(d);B=E(Q,"AVG \u2014 "),D=E(Q,q),Q.forEach(c),o=k(I),e=N(I,"DIV",{});var U=T(e);u=E(U,"MAX \u2014 "),L=E(U,b),U.forEach(c),I.forEach(c),this.h()},h(){F(s,"for","new-player-score"),F(s,"class","block mt-2"),F(r,"class","text-center font-sans text-sm text-gray-500 mt-4")},m(n,g){A(n,s,g),p(s,a),A(n,t,g),X(l,n,g),A(n,$,g),A(n,r,g),p(r,f),p(f,P),p(f,_),p(r,m),p(r,d),p(d,B),p(d,D),p(r,o),p(r,e),p(e,u),p(e,L),y=!0},p(n,g){const I={};!v&&g&16&&(v=!0,I.value=n[4].rounds[n[4].rounds.length-1],x(()=>v=!1)),l.$set(I),(!y||g&2)&&h!==(h=(n[1]||0)+"")&&j(_,h),(!y||g&8)&&q!==(q=(n[3]||0)+"")&&j(D,q),(!y||g&4)&&b!==(b=(n[2]||0)+"")&&j(L,b)},i(n){y||(M(l.$$.fragment,n),y=!0)},o(n){z(l.$$.fragment,n),y=!1},d(n){n&&c(s),n&&c(t),C(l,n),n&&c($),n&&c(r)}}}function $e(i){let s;return{c(){s=w("Done")},l(a){s=E(a,"Done")},m(a,t){A(a,s,t)},d(a){a&&c(s)}}}function he(i){let s,a,t,l,v,$,r,f,P,h,_,m,d,B;s=new fe({props:{$$slots:{default:[ge]},$$scope:{ctx:i}}});function q(e){i[6](e)}let D={id:"new-player-name",autocapitalize:"words",required:!0};i[4].name!==void 0&&(D.value=i[4].name),r=new ee({props:D}),Y.push(()=>Z(r,"value",q));let o=i[0].length&&W(i);return _=new me({props:{classList:"mt-auto",type:"submit",$$slots:{default:[$e]},$$scope:{ctx:i}}}),{c(){G(s.$$.fragment),a=S(),t=V("form"),l=V("label"),v=w("Player Name"),$=S(),G(r.$$.fragment),P=S(),o&&o.c(),h=S(),G(_.$$.fragment),this.h()},l(e){R(s.$$.fragment,e),a=k(e),t=N(e,"FORM",{});var u=T(t);l=N(u,"LABEL",{for:!0,class:!0});var b=T(l);v=E(b,"Player Name"),b.forEach(c),$=k(u),R(r.$$.fragment,u),P=k(u),o&&o.l(u),h=k(u),R(_.$$.fragment,u),u.forEach(c),this.h()},h(){F(l,"for","new-player-name"),F(l,"class","block")},m(e,u){X(s,e,u),A(e,a,u),A(e,t,u),p(t,l),p(l,v),p(t,$),X(r,t,null),p(t,P),o&&o.m(t,null),p(t,h),X(_,t,null),m=!0,d||(B=le(t,"submit",re(i[5])),d=!0)},p(e,[u]){const b={};u&512&&(b.$$scope={dirty:u,ctx:e}),s.$set(b);const L={};!f&&u&16&&(f=!0,L.value=e[4].name,x(()=>f=!1)),r.$set(L),e[0].length?o?(o.p(e,u),u&1&&M(o,1)):(o=W(e),o.c(),M(o,1),o.m(t,h)):o&&(ie(),z(o,1,1,()=>{o=null}),oe());const y={};u&512&&(y.$$scope={dirty:u,ctx:e}),_.$set(y)},i(e){m||(M(s.$$.fragment,e),M(r.$$.fragment,e),M(o),M(_.$$.fragment,e),m=!0)},o(e){z(s.$$.fragment,e),z(r.$$.fragment,e),z(o),z(_.$$.fragment,e),m=!1},d(e){C(s,e),e&&c(a),e&&c(t),C(r),o&&o.d(),C(_),d=!1,B()}}}function ve(i,s,a){let t=[],l=[],v=0,$=0,r=0,f={name:"",rounds:[]};const P=()=>{t.push(f),t=t,ce(t),l.length?K("/game/scores"):K("/game/add-scores/")};ue(()=>{t=pe(),t.length?(t.forEach(m=>{let d=_e(m);typeof d=="number"&&(l.push(+d),a(0,l))}),a(1,v=J.exports.min(l)),a(2,$=J.exports.max(l)),v&&$?a(3,r=(l.reduce((m,d)=>m+d,0)/l.length).toFixed(1)):a(3,r=0),a(4,f.rounds=t[0].rounds.map(m=>"-"),f)):de()});function h(m){i.$$.not_equal(f.name,m)&&(f.name=m,a(4,f))}function _(m){i.$$.not_equal(f.rounds[f.rounds.length-1],m)&&(f.rounds[f.rounds.length-1]=m,a(4,f))}return[l,v,$,r,f,P,h,_]}class ke extends se{constructor(s){super(),ae(this,s,ve,he,ne,{})}}export{ke as default};
